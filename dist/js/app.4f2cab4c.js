(function(){var o={5358:function(o,e,a){var r={"./af":5177,"./af.js":5177,"./ar":1509,"./ar-dz":1488,"./ar-dz.js":1488,"./ar-kw":8676,"./ar-kw.js":8676,"./ar-ly":2353,"./ar-ly.js":2353,"./ar-ma":4496,"./ar-ma.js":4496,"./ar-ps":6947,"./ar-ps.js":6947,"./ar-sa":2682,"./ar-sa.js":2682,"./ar-tn":9756,"./ar-tn.js":9756,"./ar.js":1509,"./az":5533,"./az.js":5533,"./be":8959,"./be.js":8959,"./bg":7777,"./bg.js":7777,"./bm":4903,"./bm.js":4903,"./bn":1290,"./bn-bd":7357,"./bn-bd.js":7357,"./bn.js":1290,"./bo":1545,"./bo.js":1545,"./br":1470,"./br.js":1470,"./bs":4429,"./bs.js":4429,"./ca":7306,"./ca.js":7306,"./cs":6464,"./cs.js":6464,"./cv":3635,"./cv.js":3635,"./cy":4226,"./cy.js":4226,"./da":3601,"./da.js":3601,"./de":7853,"./de-at":6111,"./de-at.js":6111,"./de-ch":4697,"./de-ch.js":4697,"./de.js":7853,"./dv":708,"./dv.js":708,"./el":4691,"./el.js":4691,"./en-au":3872,"./en-au.js":3872,"./en-ca":8298,"./en-ca.js":8298,"./en-gb":6195,"./en-gb.js":6195,"./en-ie":6584,"./en-ie.js":6584,"./en-il":5543,"./en-il.js":5543,"./en-in":9033,"./en-in.js":9033,"./en-nz":9402,"./en-nz.js":9402,"./en-sg":3004,"./en-sg.js":3004,"./eo":2934,"./eo.js":2934,"./es":7650,"./es-do":838,"./es-do.js":838,"./es-mx":7730,"./es-mx.js":7730,"./es-us":6575,"./es-us.js":6575,"./es.js":7650,"./et":3035,"./et.js":3035,"./eu":3508,"./eu.js":3508,"./fa":119,"./fa.js":119,"./fi":527,"./fi.js":527,"./fil":5995,"./fil.js":5995,"./fo":2477,"./fo.js":2477,"./fr":5498,"./fr-ca":6435,"./fr-ca.js":6435,"./fr-ch":7892,"./fr-ch.js":7892,"./fr.js":5498,"./fy":7071,"./fy.js":7071,"./ga":1734,"./ga.js":1734,"./gd":217,"./gd.js":217,"./gl":7329,"./gl.js":7329,"./gom-deva":2124,"./gom-deva.js":2124,"./gom-latn":3383,"./gom-latn.js":3383,"./gu":5050,"./gu.js":5050,"./he":1713,"./he.js":1713,"./hi":3861,"./hi.js":3861,"./hr":6308,"./hr.js":6308,"./hu":609,"./hu.js":609,"./hy-am":7160,"./hy-am.js":7160,"./id":4063,"./id.js":4063,"./is":9374,"./is.js":9374,"./it":8383,"./it-ch":1827,"./it-ch.js":1827,"./it.js":8383,"./ja":3827,"./ja.js":3827,"./jv":9722,"./jv.js":9722,"./ka":1794,"./ka.js":1794,"./kk":7088,"./kk.js":7088,"./km":6870,"./km.js":6870,"./kn":4451,"./kn.js":4451,"./ko":3164,"./ko.js":3164,"./ku":8174,"./ku-kmr":6181,"./ku-kmr.js":6181,"./ku.js":8174,"./ky":8474,"./ky.js":8474,"./lb":9680,"./lb.js":9680,"./lo":5867,"./lo.js":5867,"./lt":5766,"./lt.js":5766,"./lv":9532,"./lv.js":9532,"./me":8076,"./me.js":8076,"./mi":1848,"./mi.js":1848,"./mk":306,"./mk.js":306,"./ml":3739,"./ml.js":3739,"./mn":9053,"./mn.js":9053,"./mr":6169,"./mr.js":6169,"./ms":3386,"./ms-my":2297,"./ms-my.js":2297,"./ms.js":3386,"./mt":7075,"./mt.js":7075,"./my":2264,"./my.js":2264,"./nb":2274,"./nb.js":2274,"./ne":8235,"./ne.js":8235,"./nl":2572,"./nl-be":3784,"./nl-be.js":3784,"./nl.js":2572,"./nn":4566,"./nn.js":4566,"./oc-lnc":9330,"./oc-lnc.js":9330,"./pa-in":9849,"./pa-in.js":9849,"./pl":4418,"./pl.js":4418,"./pt":9834,"./pt-br":8303,"./pt-br.js":8303,"./pt.js":9834,"./ro":4457,"./ro.js":4457,"./ru":2271,"./ru.js":2271,"./sd":1221,"./sd.js":1221,"./se":3478,"./se.js":3478,"./si":7538,"./si.js":7538,"./sk":5784,"./sk.js":5784,"./sl":6637,"./sl.js":6637,"./sq":6794,"./sq.js":6794,"./sr":5719,"./sr-cyrl":3322,"./sr-cyrl.js":3322,"./sr.js":5719,"./ss":6e3,"./ss.js":6e3,"./sv":1011,"./sv.js":1011,"./sw":748,"./sw.js":748,"./ta":1025,"./ta.js":1025,"./te":1885,"./te.js":1885,"./tet":8861,"./tet.js":8861,"./tg":6571,"./tg.js":6571,"./th":5802,"./th.js":5802,"./tk":9527,"./tk.js":9527,"./tl-ph":9231,"./tl-ph.js":9231,"./tlh":1052,"./tlh.js":1052,"./tr":5096,"./tr.js":5096,"./tzl":9846,"./tzl.js":9846,"./tzm":1765,"./tzm-latn":7711,"./tzm-latn.js":7711,"./tzm.js":1765,"./ug-cn":8414,"./ug-cn.js":8414,"./uk":6618,"./uk.js":6618,"./ur":158,"./ur.js":158,"./uz":7609,"./uz-latn":2475,"./uz-latn.js":2475,"./uz.js":7609,"./vi":1135,"./vi.js":1135,"./x-pseudo":4051,"./x-pseudo.js":4051,"./yo":2218,"./yo.js":2218,"./zh-cn":2648,"./zh-cn.js":2648,"./zh-hk":1632,"./zh-hk.js":1632,"./zh-mo":1541,"./zh-mo.js":1541,"./zh-tw":304,"./zh-tw.js":304};function l(o){var e=t(o);return a(e)}function t(o){if(!a.o(r,o)){var e=new Error("Cannot find module '"+o+"'");throw e.code="MODULE_NOT_FOUND",e}return r[o]}l.keys=function(){return Object.keys(r)},l.resolve=t,o.exports=l,l.id=5358},8631:function(o,e,a){"use strict";var r=a(3751),l=a(641),t=a(33);const i={id:"app"},s={key:0,class:"navbar"},n={class:"dropdown"},u=(0,l.Lk)("span",{class:"nav-link dropdown-toggle"},"Usuarios del Sistema",-1),c={key:0,class:"dropdown-content"},d={key:0,class:"dropdown"},m=(0,l.Lk)("span",{class:"nav-link dropdown-toggle"},"Perfil",-1),p={class:"dropdown-content"},h={class:"user-info"},f=(0,l.Lk)("strong",null,"Nombre: ",-1),k=(0,l.Lk)("strong",null,"Grado: ",-1),b={key:0},v=(0,l.Lk)("strong",null,"Rol: ",-1),g=(0,l.Lk)("strong",null,"Usuario: ",-1),L=(0,l.Lk)("div",{class:"dropdown-divider"},null,-1);function y(o,e,a,r,y,C){const V=(0,l.g2)("router-link"),j=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)("div",i,[C.showNavbar?((0,l.uX)(),(0,l.CE)("nav",s,[(0,l.bF)(V,{to:"/formulario",class:"nav-link"},{default:(0,l.k6)((()=>[(0,l.eW)("Formulario")])),_:1}),(0,l.bF)(V,{to:"/hechos",class:"nav-link"},{default:(0,l.k6)((()=>[(0,l.eW)("Hechos")])),_:1}),(0,l.Lk)("div",n,[u,y.isAdmin?((0,l.uX)(),(0,l.CE)("div",c,[(0,l.bF)(V,{to:"/register",class:"nav-link"},{default:(0,l.k6)((()=>[(0,l.eW)("Registrar Usuario")])),_:1}),(0,l.bF)(V,{to:"/usuarios",class:"nav-link"},{default:(0,l.k6)((()=>[(0,l.eW)("Usuarios Registrados")])),_:1})])):(0,l.Q3)("",!0)]),y.loggedIn?((0,l.uX)(),(0,l.CE)("div",d,[m,(0,l.Lk)("div",p,[(0,l.Lk)("div",h,[(0,l.Lk)("p",null,[f,(0,l.eW)((0,t.v_)(y.userData.nombre)+" "+(0,t.v_)(y.userData.apellidos),1)]),(0,l.Lk)("p",null,[k,(0,l.eW)((0,t.v_)(y.userData.grado),1)]),y.isAdmin?((0,l.uX)(),(0,l.CE)("p",b,[v,(0,l.eW)("Administrador")])):(0,l.Q3)("",!0),(0,l.Lk)("p",null,[g,(0,l.eW)((0,t.v_)(y.userData.usuario),1)])]),L,(0,l.Lk)("a",{href:"#",onClick:e[0]||(e[0]=(...o)=>C.logout&&C.logout(...o)),class:"dropdown-item"},"Cerrar Sesión")])])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0),(0,l.bF)(j,{userData:y.userData,loggedIn:y.loggedIn,isAdmin:y.isAdmin,onLoginSuccess:C.fetchUserData},null,8,["userData","loggedIn","isAdmin","onLoginSuccess"])])}var C={name:"App",data(){return{loggedIn:!1,userData:{},isAdmin:!1}},computed:{showNavbar(){return"/"!==this.$route.path}},methods:{logout(){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("userData"),this.loggedIn=!1,this.userData={},this.isAdmin=!1,this.$router.push("/")},fetchUserData(){const o=localStorage.getItem("userId"),e=localStorage.getItem("token"),a=localStorage.getItem("userData");if(o&&e&&a)try{this.userData=JSON.parse(a),this.loggedIn=!0,this.isAdmin="administrador"===this.userData.rol}catch(r){console.error("Error al analizar userData:",r),this.loggedIn=!1,this.isAdmin=!1}else this.logout()}},created(){this.fetchUserData(),window.addEventListener("beforeunload",(()=>{this.logout()}))}},V=a(6262);const j=(0,V.A)(C,[["render",y]]);var U=j,E=a(5220);const I=o=>((0,l.Qi)("data-v-ecc57712"),o=o(),(0,l.jt)(),o),w={class:"inicio-sesion-container"},D={class:"inicio-sesion"},A=I((()=>(0,l.Lk)("h2",null,"Inicio de Sesión",-1))),F={class:"form-group"},N=I((()=>(0,l.Lk)("label",{for:"usuario"},"Usuario:",-1))),J={class:"form-group"},x=I((()=>(0,l.Lk)("label",{for:"password"},"Contraseña:",-1))),S={class:"password-wrapper"},z=["type"],X={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",width:"24",height:"24"},H=I((()=>(0,l.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 5C7.0589 5 2.9411 7.5139 1 12c1.9411 4.4861 6.0589 7 11 7s9.0589-2.5139 11-7c-1.9411-4.4861-6.0589-7-11-7zm0 2c2.2203 0 4.2674.888 5.814 2.3399-1.5531 1.4497-3.5946 2.3156-5.814 2.3156s-4.2609-.8659-5.814-2.3156C7.7326 7.888 9.7797 7 12 7zm-1 3h2v2h-2v-2zm2 6c-2.4853 0-4.5-2.0147-4.5-4.5S10.5147 7.5 13 7.5 17.5 9.5147 17.5 12 15.4853 16 13 16z"},null,-1))),_=[H],B={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",width:"24",height:"24"},R=I((()=>(0,l.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 5C7.0589 5 2.9411 7.5139 1 12c1.9411 4.4861 6.0589 7 11 7s9.0589-2.5139 11-7c-1.9411-4.4861-6.0589-7-11-7zm0 2c2.2203 0 4.2674.888 5.814 2.3399-1.5531 1.4497-3.5946 2.3156-5.814 2.3156s-4.2609-.8659-5.814-2.3156C7.7326 7.888 9.7797 7 12 7zm-1 3h2v2h-2v-2zm2 6c-2.4853 0-4.5-2.0147-4.5-4.5S10.5147 7.5 13 7.5 17.5 9.5147 17.5 12 15.4853 16 13 16z"},null,-1))),$=[R],G=I((()=>(0,l.Lk)("button",{type:"submit",class:"btn-iniciar-sesion"},"Iniciar Sesión",-1)));function P(o,e,a,t,i,s){return(0,l.uX)(),(0,l.CE)("div",w,[(0,l.Lk)("div",D,[A,(0,l.Lk)("form",{onSubmit:e[3]||(e[3]=(0,r.D$)(((...o)=>s.login&&s.login(...o)),["prevent"]))},[(0,l.Lk)("div",F,[N,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"usuario","onUpdate:modelValue":e[0]||(e[0]=o=>i.usuario=o),autocomplete:"off",required:""},null,512),[[r.Jo,i.usuario]])]),(0,l.Lk)("div",J,[x,(0,l.Lk)("div",S,[(0,l.bo)((0,l.Lk)("input",{type:s.passwordFieldType,id:"password","onUpdate:modelValue":e[1]||(e[1]=o=>i.password=o),autocomplete:"off",required:""},null,8,z),[[r.hp,i.password]]),(0,l.Lk)("span",{onClick:e[2]||(e[2]=(...o)=>s.togglePasswordVisibility&&s.togglePasswordVisibility(...o)),class:"password-toggle"},[i.showPassword?((0,l.uX)(),(0,l.CE)("svg",X,_)):((0,l.uX)(),(0,l.CE)("svg",B,$))])])]),G],32)])])}var O=a(4335),Q=a(5246),T={name:"Login",data(){return{usuario:"",password:"",showPassword:!1}},setup(){const o=(0,E.rd)(),e=(0,Q.dj)();return{router:o,toast:e}},computed:{passwordFieldType(){return this.showPassword?"text":"password"}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},async login(){try{const o="http://localhost:5000",e=await O.A.post(`${o}/api/usuarios/login`,{usuario:this.usuario,password:this.password});e.data.token&&e.data.userId&&e.data.userData?(localStorage.setItem("token",e.data.token),localStorage.setItem("userId",e.data.userId),localStorage.setItem("userData",JSON.stringify(e.data.userData)),this.toast.success("Inicio de sesión correcto"),this.$emit("loginSuccess"),this.router.push("/formulario")):this.toast.error("Credenciales inválidas")}catch(o){console.error("Error al iniciar sesión:",o),this.toast.error("Error al iniciar sesión")}}}};const Z=(0,V.A)(T,[["render",P],["__scopeId","data-v-ecc57712"]]);var q=Z;const M=o=>((0,l.Qi)("data-v-15bee6fa"),o=o(),(0,l.jt)(),o),W={class:"registro-usuario-container"},Y={class:"registro-usuario"},K=M((()=>(0,l.Lk)("h2",null,"Registro de Usuario",-1))),oo={class:"form-group"},eo=M((()=>(0,l.Lk)("label",{for:"nombre"},"Nombre:",-1))),ao={class:"form-group"},ro=M((()=>(0,l.Lk)("label",{for:"apellidos"},"Apellidos:",-1))),lo={class:"form-group"},to=M((()=>(0,l.Lk)("label",{for:"carnet"},"Carnet de Identidad:",-1))),io={class:"form-group"},so=M((()=>(0,l.Lk)("label",{for:"grado"},"Grado:",-1))),no={class:"form-group"},uo=M((()=>(0,l.Lk)("label",{for:"rol"},"Rol:",-1))),co=M((()=>(0,l.Lk)("option",{value:"usuario"},"Usuario",-1))),mo=M((()=>(0,l.Lk)("option",{value:"administrador"},"Administrador",-1))),po=[co,mo],ho={class:"form-group"},fo=M((()=>(0,l.Lk)("label",{for:"usuario"},"Usuario:",-1))),ko={class:"form-group"},bo=M((()=>(0,l.Lk)("label",{for:"password"},"Contraseña:",-1))),vo={key:0},go=M((()=>(0,l.Lk)("button",{type:"submit",class:"btn-registrar"},"Registrar",-1)));function Lo(o,e,a,i,s,n){return(0,l.uX)(),(0,l.CE)("div",W,[(0,l.Lk)("div",Y,[K,(0,l.Lk)("form",{onSubmit:e[7]||(e[7]=(0,r.D$)(((...o)=>n.register&&n.register(...o)),["prevent"]))},[(0,l.Lk)("div",oo,[eo,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"nombre","onUpdate:modelValue":e[0]||(e[0]=o=>s.nombre=o),required:"",autocomplete:"off"},null,512),[[r.Jo,s.nombre]])]),(0,l.Lk)("div",ao,[ro,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"apellidos","onUpdate:modelValue":e[1]||(e[1]=o=>s.apellidos=o),required:"",autocomplete:"off"},null,512),[[r.Jo,s.apellidos]])]),(0,l.Lk)("div",lo,[to,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"carnet","onUpdate:modelValue":e[2]||(e[2]=o=>s.carnet=o),required:"",autocomplete:"off"},null,512),[[r.Jo,s.carnet]])]),(0,l.Lk)("div",io,[so,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"grado","onUpdate:modelValue":e[3]||(e[3]=o=>s.grado=o),required:"",autocomplete:"off"},null,512),[[r.Jo,s.grado]])]),(0,l.Lk)("div",no,[uo,(0,l.bo)((0,l.Lk)("select",{id:"rol","onUpdate:modelValue":e[4]||(e[4]=o=>s.rol=o),required:""},po,512),[[r.u1,s.rol]])]),(0,l.Lk)("div",ho,[fo,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"usuario","onUpdate:modelValue":e[5]||(e[5]=o=>s.usuario=o),required:"",autocomplete:"off"},null,512),[[r.Jo,s.usuario]])]),(0,l.Lk)("div",ko,[bo,(0,l.bo)((0,l.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":e[6]||(e[6]=o=>s.password=o),required:"",autocomplete:"off"},null,512),[[r.Jo,s.password]]),s.passwordMessage?((0,l.uX)(),(0,l.CE)("small",vo,(0,t.v_)(s.passwordMessage),1)):(0,l.Q3)("",!0)]),go],32)])])}var yo={data(){return{nombre:"",apellidos:"",carnet:"",grado:"",rol:"usuario",usuario:"",password:"",passwordMessage:""}},watch:{password(o){this.validatePassword(o)}},methods:{validatePassword(o){const e=[{regex:/.{8,}/,message:"Debe tener al menos 8 caracteres"},{regex:/[A-Z]/,message:"Debe tener al menos una letra mayúscula"},{regex:/\d/,message:"Debe tener al menos un número"}];this.passwordMessage=e.filter((e=>!e.regex.test(o))).map((o=>o.message)).join(", ")},async register(){const o=(0,Q.dj)();if(this.passwordMessage)o.error("La contraseña no cumple con las condiciones necesarias");else try{const e="http://localhost:5000",a=await O.A.post(`${e}/api/usuarios/register`,{nombre:this.nombre,apellidos:this.apellidos,carnet:this.carnet,grado:this.grado,rol:this.rol,usuario:this.usuario,password:this.password});console.log(a.data),o.success("Usuario registrado exitosamente"),this.clearForm(),this.$router.push("/")}catch(e){o.error(e.response?.data?.message||"Error al registrar el usuario")}},clearForm(){this.nombre="",this.apellidos="",this.carnet="",this.grado="",this.rol="usuario",this.usuario="",this.password="",this.errorMessage="",this.passwordMessage=""}}};const Co=(0,V.A)(yo,[["render",Lo],["__scopeId","data-v-15bee6fa"]]);var Vo=Co;const jo=o=>((0,l.Qi)("data-v-ec30a89a"),o=o(),(0,l.jt)(),o),Uo={class:"formulario"},Eo={class:"form-container"},Io=jo((()=>(0,l.Lk)("h1",null,"CERTIFICADO DE ACCIDENTES DE TRÁNSITO - SOAT",-1))),wo=jo((()=>(0,l.Lk)("h3",null,"EL JEFE DE LA DIVISIÓN DE ACCIDENTES DE LA DIRECCIÓN DEPARTAMENTAL DE TRÁNSITO DE LA CIUDAD DE LA PAZ, EN CUANTO PUEDE Y EL DERECHO LE PERMITE:",-1))),Do=jo((()=>(0,l.Lk)("h2",null,"CERTIFICA:",-1))),Ao=jo((()=>(0,l.Lk)("p",null,[(0,l.Lk)("strong",null,"1. Datos del Hecho de Tránsito")],-1))),Fo=jo((()=>(0,l.Lk)("label",{for:"denunciante"},"Denunciante:",-1))),No=jo((()=>(0,l.Lk)("label",{for:"casoNumero"},"Caso N°:",-1))),Jo=jo((()=>(0,l.Lk)("label",{for:"naturaleza"},"Naturaleza del Hecho:",-1))),xo=jo((()=>(0,l.Lk)("label",{for:"departamento"},"Departamento:",-1))),So=(0,l.Fv)('<option value="La Paz" data-v-ec30a89a>La Paz</option><option value="Cochabamba" data-v-ec30a89a>Cochabamba</option><option value="Santa Cruz" data-v-ec30a89a>Santa Cruz</option><option value="Oruro" data-v-ec30a89a>Oruro</option><option value="Potosi" data-v-ec30a89a>Potosí</option><option value="Tarija" data-v-ec30a89a>Tarija</option><option value="Beni" data-v-ec30a89a>Beni</option><option value="Pando" data-v-ec30a89a>Pando</option><option value="Chuquisaca" data-v-ec30a89a>Chuquisaca</option>',9),zo=[So],Xo=jo((()=>(0,l.Lk)("label",{for:"estacionPolicial"},"Estación Policial:",-1))),Ho=jo((()=>(0,l.Lk)("label",{for:"lugar"},"Lugar del Hecho:",-1))),_o=jo((()=>(0,l.Lk)("label",{for:"diaHoraFecha"},"Día, Hora y Fecha del Hecho:",-1))),Bo=jo((()=>(0,l.Lk)("div",null,[(0,l.Lk)("p",null,[(0,l.Lk)("strong",null,"2. Datos de los Vehículos")])],-1))),Ro=["for"],$o=["id","onUpdate:modelValue"],Go=["onClick"],Po={key:0},Oo=jo((()=>(0,l.Lk)("h3",null,"Vehículos:",-1))),Qo=jo((()=>(0,l.Lk)("label",{for:"empresa"},"Empresa o Institución a la que pertenece el vehículo:",-1))),To=["onUpdate:modelValue"],Zo=jo((()=>(0,l.Lk)("label",{for:"tipoUso"},"Tipo de servicio:",-1))),qo=["id","onUpdate:modelValue"],Mo=jo((()=>(0,l.Lk)("option",{value:"Particular"},"Particular",-1))),Wo=jo((()=>(0,l.Lk)("option",{value:"Público"},"Público",-1))),Yo=[Mo,Wo],Ko=jo((()=>(0,l.Lk)("div",null,[(0,l.Lk)("p",null,[(0,l.Lk)("strong",null,"3. Datos de los Conductores")])],-1))),oe=["for"],ee=["id","onUpdate:modelValue"],ae=["onClick"],re={key:1},le=jo((()=>(0,l.Lk)("h3",null,"Conductores:",-1))),te=["for"],ie=["id","onUpdate:modelValue"],se=["for"],ne=["id","onUpdate:modelValue"],ue=(0,l.Fv)('<option value="A" data-v-ec30a89a>A</option><option value="B" data-v-ec30a89a>B</option><option value="C" data-v-ec30a89a>C</option><option value="P" data-v-ec30a89a>P</option><option value="M" data-v-ec30a89a>M</option>',5),ce=[ue],de=["for"],me=["id","onUpdate:modelValue"],pe=["for"],he=["id","onUpdate:modelValue"],fe=["for"],ke=["id","onUpdate:modelValue"],be=["for"],ve=["id","onUpdate:modelValue"],ge=["for"],Le=["id","onUpdate:modelValue"],ye=["value"],Ce=jo((()=>(0,l.Lk)("p",null,[(0,l.Lk)("strong",null,"4. Breve detalle del hecho")],-1))),Ve=jo((()=>(0,l.Lk)("label",{for:"detalle"},"Detalle del Hecho:",-1))),je=jo((()=>(0,l.Lk)("div",null,[(0,l.Lk)("p",null,[(0,l.Lk)("strong",null,"5. Víctimas del hecho")])],-1))),Ue=["for"],Ee=["id","onUpdate:modelValue"],Ie=["onClick"],we={key:2},De=jo((()=>(0,l.Lk)("h3",null,"Víctimas:",-1))),Ae=["for"],Fe=["id","onUpdate:modelValue"],Ne=jo((()=>(0,l.Lk)("option",{value:"Fallecido"},"Fallecido",-1))),Je=jo((()=>(0,l.Lk)("option",{value:"Herido"},"Herido",-1))),xe=[Ne,Je],Se=["for"],ze=["id","onUpdate:modelValue"],Xe=jo((()=>(0,l.Lk)("option",{value:"Peatón"},"Peatón",-1))),He=jo((()=>(0,l.Lk)("option",{value:"Pasajero"},"Pasajero",-1))),_e=jo((()=>(0,l.Lk)("option",{value:"Conductor"},"Conductor",-1))),Be=[Xe,He,_e],Re=["for"],$e=["id","onUpdate:modelValue"],Ge=jo((()=>(0,l.Lk)("option",{value:"Sin Vehiculo"},"Sin Vehículo",-1))),Pe=["value"],Oe=["for"],Qe=["id","onUpdate:modelValue"],Te=jo((()=>(0,l.Lk)("label",{for:"fechaRegistro"},"Fecha y Hora del Registro en el Sistema:",-1))),Ze=jo((()=>(0,l.Lk)("label",{for:"usuario"},"Usuario:",-1))),qe=["value"],Me=jo((()=>(0,l.Lk)("button",{type:"submit"},"Enviar",-1)));function We(o,e,a,i,s,n){return(0,l.uX)(),(0,l.CE)("div",Uo,[(0,l.Lk)("div",Eo,[Io,(0,l.Lk)("form",{onSubmit:e[12]||(e[12]=(0,r.D$)(((...o)=>n.submitFormulario&&n.submitFormulario(...o)),["prevent"]))},[wo,Do,Ao,(0,l.Lk)("div",null,[(0,l.Lk)("div",null,[Fo,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"denunciante","onUpdate:modelValue":e[0]||(e[0]=o=>s.formulario.hechos.denunciante=o),maxlength:"500",class:"input",autocomplete:"off"},null,512),[[r.Jo,s.formulario.hechos.denunciante]])]),(0,l.Lk)("div",null,[No,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"casoNumero","onUpdate:modelValue":e[1]||(e[1]=o=>s.formulario.hechos.casoNumero=o),class:"input",autocomplete:"off",placeholder:"Mínimo 10 caracteres"},null,512),[[r.Jo,s.formulario.hechos.casoNumero]])]),(0,l.Lk)("div",null,[Jo,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"naturaleza","onUpdate:modelValue":e[2]||(e[2]=o=>s.formulario.hechos.naturaleza=o),maxlength:"500",class:"input",autocomplete:"off"},null,512),[[r.Jo,s.formulario.hechos.naturaleza]])]),(0,l.Lk)("div",null,[xo,(0,l.bo)((0,l.Lk)("select",{id:"departamento","onUpdate:modelValue":e[3]||(e[3]=o=>s.formulario.hechos.departamento=o),maxlength:"50",class:"input",autocomplete:"off"},zo,512),[[r.u1,s.formulario.hechos.departamento]])]),(0,l.Lk)("div",null,[Xo,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"estacionPolicial","onUpdate:modelValue":e[4]||(e[4]=o=>s.formulario.hechos.estacionPolicial=o),maxlength:"500",class:"input",autocomplete:"off"},null,512),[[r.Jo,s.formulario.hechos.estacionPolicial]])]),(0,l.Lk)("div",null,[Ho,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"lugar","onUpdate:modelValue":e[5]||(e[5]=o=>s.formulario.hechos.lugar=o),maxlength:"500",class:"input",autocomplete:"off"},null,512),[[r.Jo,s.formulario.hechos.lugar]])]),(0,l.Lk)("div",null,[_o,(0,l.bo)((0,l.Lk)("input",{type:"datetime-local",id:"diaHoraFecha","onUpdate:modelValue":e[6]||(e[6]=o=>s.formulario.hechos.diaHoraFecha=o),class:"input",autocomplete:"off"},null,512),[[r.Jo,s.formulario.hechos.diaHoraFecha]])])]),Bo,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.formulario.vehiculos,((o,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e},[(0,l.Lk)("label",{for:"vehiculo"+e},"Placa del Vehículo "+(0,t.v_)(e+1)+":",9,Ro),(0,l.bo)((0,l.Lk)("input",{id:"vehiculo"+e,"onUpdate:modelValue":e=>o.placa=e,class:"input",autocomplete:"off"},null,8,$o),[[r.Jo,o.placa]]),(0,l.Lk)("button",{type:"button",onClick:o=>n.confirmarBuscarVehiculo(e)},"Buscar",8,Go)])))),128)),s.vehiculosEncontrados.length>0?((0,l.uX)(),(0,l.CE)("div",Po,[Oo,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.vehiculosEncontrados,((o,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"input"},[(0,l.Lk)("h3",null,"Vehículo "+(0,t.v_)(e+1)+":",1),(0,l.Lk)("p",null,"Placa: "+(0,t.v_)(o.placa),1),(0,l.Lk)("p",null,"Marca: "+(0,t.v_)(o.marca),1),(0,l.Lk)("p",null,"Modelo: "+(0,t.v_)(o.modelo),1),(0,l.Lk)("p",null,"Tipo Vehículo: "+(0,t.v_)(o.clase),1),(0,l.Lk)("p",null,"Color: "+(0,t.v_)(o.color),1),Qo,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"empresa","onUpdate:modelValue":o=>s.formulario.vehiculos[e].empresa=o,class:"input",autocomplete:"off"},null,8,To),[[r.Jo,s.formulario.vehiculos[e].empresa]]),Zo,(0,l.bo)((0,l.Lk)("select",{id:"tipoUso"+e,"onUpdate:modelValue":o=>s.formulario.vehiculos[e].tipoUso=o,class:"input",autocomplete:"off"},Yo,8,qo),[[r.u1,s.formulario.vehiculos[e].tipoUso]])])))),128)),(0,l.Lk)("button",{type:"button",onClick:e[7]||(e[7]=(...o)=>n.agregarVehiculo&&n.agregarVehiculo(...o))},"+ Registrar otro vehículo")])):(0,l.Q3)("",!0),Ko,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.formulario.conductores,((o,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e},[(0,l.Lk)("label",{for:"conductor"+e},"CI del Conductor "+(0,t.v_)(e+1)+":",9,oe),(0,l.bo)((0,l.Lk)("input",{id:"conductor"+e,"onUpdate:modelValue":e=>o.ci=e,class:"input",autocomplete:"off"},null,8,ee),[[r.Jo,o.ci,void 0,{number:!0}]]),(0,l.Lk)("button",{type:"button",onClick:o=>n.confirmarBuscarConductor(e)},"Buscar",8,ae)])))),128)),s.conductoresEncontrados.length>0?((0,l.uX)(),(0,l.CE)("div",re,[le,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.conductoresEncontrados,((o,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"input"},[(0,l.Lk)("h3",null,"Conductor "+(0,t.v_)(e+1)+":",1),(0,l.Lk)("p",null,"Nombre: "+(0,t.v_)(o.nombre),1),(0,l.Lk)("p",null,"CI: "+(0,t.v_)(o.ci),1),(0,l.Lk)("p",null,"Edad: "+(0,t.v_)(o.edad),1),(0,l.Lk)("p",null,"Domicilio: "+(0,t.v_)(o.domicilio),1),(0,l.Lk)("label",{for:"licencia"+e},"Licencia de Conducir N°:",8,te),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"licencia"+e,"onUpdate:modelValue":o=>s.formulario.conductores[e].licencia=o,class:"input",autocomplete:"off"},null,8,ie),[[r.Jo,s.formulario.conductores[e].licencia]]),(0,l.Lk)("label",{for:"categoria"+e},"Categoría:",8,se),(0,l.bo)((0,l.Lk)("select",{id:"categoria"+e,"onUpdate:modelValue":o=>s.formulario.conductores[e].categoria=o,class:"input"},ce,8,ne),[[r.u1,s.formulario.conductores[e].categoria]]),(0,l.Lk)("label",{for:"licDesde"+e},"Licencia de Conducir con Vigencia desde:",8,de),(0,l.bo)((0,l.Lk)("input",{type:"date",id:"licDesde"+e,"onUpdate:modelValue":e=>o.licDesde=e,class:"input",autocomplete:"off"},null,8,me),[[r.Jo,o.licDesde]]),(0,l.Lk)("label",{for:"licHasta"+e},"Licencia de Conducir con Vigencia hasta:",8,pe),(0,l.bo)((0,l.Lk)("input",{type:"date",id:"licHasta"+e,"onUpdate:modelValue":e=>o.licHasta=e,class:"input",autocomplete:"off"},null,8,he),[[r.Jo,o.licHasta]]),(0,l.Lk)("label",{for:"alcoholemia"+e},"Resultado Test de Alcoholemia:",8,fe),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"alcoholemia"+e,"onUpdate:modelValue":o=>s.formulario.conductores[e].alcoholemia=o,maxlength:"500",class:"input",autocomplete:"off"},null,8,ke),[[r.Jo,s.formulario.conductores[e].alcoholemia]]),(0,l.Lk)("label",{for:"alcoholemiaHora"+e},"Realizado:",8,be),(0,l.bo)((0,l.Lk)("input",{type:"datetime-local",id:"alcoholemiaHora"+e,"onUpdate:modelValue":o=>s.formulario.conductores[e].alcoholemiaHora=o,class:"input",autocomplete:"off"},null,8,ve),[[r.Jo,s.formulario.conductores[e].alcoholemiaHora]]),(0,l.Lk)("label",{for:"vehiculoCorrespondeConductor"+e},"Vehículo al que Correspondía:",8,ge),(0,l.bo)((0,l.Lk)("select",{id:"vehiculoCorrespondeConductor"+e,"onUpdate:modelValue":o=>s.formulario.conductores[e].vehiculoCorrespondeConductor=o,class:"input"},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.formulario.vehiculos,((o,e)=>((0,l.uX)(),(0,l.CE)("option",{key:e,value:o.placa},(0,t.v_)(o.placa),9,ye)))),128))],8,Le),[[r.u1,s.formulario.conductores[e].vehiculoCorrespondeConductor]])])))),128)),(0,l.Lk)("button",{type:"button",onClick:e[8]||(e[8]=(...o)=>n.agregarConductor&&n.agregarConductor(...o))},"+ Agregar Conductor")])):(0,l.Q3)("",!0),Ce,(0,l.Lk)("div",null,[Ve,(0,l.bo)((0,l.Lk)("textarea",{id:"detalle","onUpdate:modelValue":e[9]||(e[9]=o=>s.formulario.detalle=o),maxlength:"5000",class:"textarea"},null,512),[[r.Jo,s.formulario.detalle]])]),je,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.formulario.victimas,((o,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e},[(0,l.Lk)("label",{for:"victima"+e},"CI de la Víctima "+(0,t.v_)(e+1)+":",9,Ue),(0,l.bo)((0,l.Lk)("input",{id:"victima"+e,"onUpdate:modelValue":e=>o.ci=e,class:"input",autocomplete:"off"},null,8,Ee),[[r.Jo,o.ci]]),(0,l.Lk)("button",{type:"button",onClick:o=>n.confirmarBuscarVictima(e)},"Buscar",8,Ie)])))),128)),s.victimasEncontradas.length>0?((0,l.uX)(),(0,l.CE)("div",we,[De,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.victimasEncontradas,((o,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"input"},[(0,l.Lk)("h3",null,"Víctima "+(0,t.v_)(e+1)+":",1),(0,l.Lk)("p",null,"Nombre: "+(0,t.v_)(o.nombre),1),(0,l.Lk)("p",null,"CI: "+(0,t.v_)(o.ci),1),(0,l.Lk)("p",null,"Edad: "+(0,t.v_)(o.edad),1),(0,l.Lk)("p",null,"Domicilio: "+(0,t.v_)(o.domicilio),1),(0,l.Lk)("label",{for:"fallecidoHerido"+e},"Fallecido o Herido:",8,Ae),(0,l.bo)((0,l.Lk)("select",{id:"fallecidoHerido"+e,"onUpdate:modelValue":e=>o.fallecidoHerido=e,class:"input"},xe,8,Fe),[[r.u1,o.fallecidoHerido]]),(0,l.Lk)("label",{for:"tipoVictima"+e},"Tipo de Víctima:",8,Se),(0,l.bo)((0,l.Lk)("select",{id:"tipoVictima"+e,"onUpdate:modelValue":e=>o.tipoVictima=e,class:"input"},Be,8,ze),[[r.u1,o.tipoVictima]]),(0,l.Lk)("label",{for:"vehiculoCorrespondeVictima"+e},"Vehículo al que Correspondía:",8,Re),(0,l.bo)((0,l.Lk)("select",{id:"vehiculoCorrespondeVictima"+e,"onUpdate:modelValue":e=>o.vehiculoCorrespondeVictima=e,class:"input"},[Ge,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.formulario.vehiculos,((o,e)=>((0,l.uX)(),(0,l.CE)("option",{key:e,value:o.placa},(0,t.v_)(o.placa),9,Pe)))),128))],8,$e),[[r.u1,o.vehiculoCorrespondeVictima]]),(0,l.Lk)("label",{for:"auxiliado"+e},"Auxiliado a:",8,Oe),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"auxiliado"+e,"onUpdate:modelValue":e=>o.auxiliado=e,class:"input",autocomplete:"off"},null,8,Qe),[[r.Jo,o.auxiliado]])])))),128)),(0,l.Lk)("button",{type:"button",onClick:e[10]||(e[10]=(...o)=>n.agregarVictima&&n.agregarVictima(...o))},"+ Agregar Víctima")])):(0,l.Q3)("",!0),(0,l.Lk)("div",null,[Te,(0,l.bo)((0,l.Lk)("input",{type:"datetime-local",id:"fechaRegistro","onUpdate:modelValue":e[11]||(e[11]=o=>s.formulario.fechaRegistro=o),class:"input",autocomplete:"off"},null,512),[[r.Jo,s.formulario.fechaRegistro]])]),(0,l.Lk)("div",null,[Ze,(0,l.Lk)("input",{type:"text",id:"usuario",value:s.usuario,readonly:"",class:"input",autocomplete:"off"},null,8,qe)]),Me],32)])])}var Ye={name:"Formulario",props:{userData:Object},data(){return{formulario:{hechos:{denunciante:"",casoNumero:"",naturaleza:"",lugar:"",diaHoraFecha:"",departamento:"",estacionPolicial:"",relato:""},vehiculos:[{placa:"",marca:"",modelo:"",clase:"",color:"",empresa:"",tipoUso:""}],conductores:[{ci:"",nombre:"",edad:"",domicilio:"",licencia:"",categoria:"",alcoholemia:"",alcoholemiaHora:"",vehiculoCorrespondeConductor:"",licDesde:"",licHasta:""}],detalle:"",victimas:[{nombre:"",ci:"",edad:"",domicilio:"",fallecidoHerido:"",tipoVictima:"",vehiculoCorrespondeVictima:"",auxiliado:""}],fechaRegistro:"",usuario:"",comentarios:""},usuario:`${this.userData.grado} ${this.userData.nombre} ${this.userData.apellidos}`,vehiculosEncontrados:[],conductoresEncontrados:[],victimasEncontradas:[]}},mounted(){const o=JSON.parse(localStorage.getItem("userData"));this.formulario.usuario=` ${o.grado} ${o.nombre} ${o.apellidos}`},computed:{actualDate(){return(new Date).toISOString().slice(0,16)}},methods:{async submitFormulario(){const o=confirm("¿Está seguro de los datos ingresados? Éstos no se pueden modificar más adelante.");if(!o)return;const e={hechos:this.formulario.hechos,vehiculos:this.formulario.vehiculos,conductores:this.formulario.conductores,detalle:this.formulario.detalle,victimas:this.formulario.victimas,usuario:this.usuario,fechaRegistro:this.formulario.fechaRegistro,comentarios:this.formulario.comentarios};console.log(this.formulario),console.log("Datos enviados: ",e);try{const o="http://localhost:5000",e=await O.A.post(`${o}/accidentes`,this.formulario);console.log("response",e),alert("Formulario enviado exitosamente"),this.$router.push("/hechos")}catch(a){console.error("Error al enviar el formulario:",a),alert("Error al enviar el formulario. Revisa la consola para más detalles.")}},confirmarBuscarVehiculo(o){const e=this.formulario.vehiculos[o].placa,a=confirm(`El dato de la placa a buscar es ${e}, ¿Está seguro?`);a&&this.buscarVehiculo(o)},async buscarVehiculo(o){const e=this.formulario.vehiculos[o],a={contrasenia:"d1u4EeXYnp8Xy5h2xWbTz4o0X8EfUhihOwF7Ejd9wrJYQNXkbzCVG7PU7AWndEMDJujblbUcQnO884pdlEMA==",usuario:"MinGobDNFRServicio",token_key_MG:"P7ehC5HPARluSshmhjb4rmfULceEqO0ku5QhT5iXs3YAMlEUiEbYd6CwQKKrb2RvoT4hHz1Hw6Pm8pRMbshjw==",placa:e.placa};try{const r=await O.A.post("https://srvweb.policiadnfr.gob.bo/api/ConsultaVehiculo/ServicioMinGob",a);if(r.data&&r.data.datos_vehiculo){const a=r.data.datos_vehiculo;delete a.fotografia;const l=this.vehiculosEncontrados.find((o=>o.placa===e.placa));l?alert("El vehículo ya ha sido agregado."):(this.formulario.vehiculos.splice(o,1,a),this.vehiculosEncontrados.push(a))}else console.log("No se encontraron datos del vehículo")}catch(r){console.error("Error al buscar el vehículo:",r)}},agregarVehiculo(){this.formulario.vehiculos.push({placa:""})},confirmarBuscarConductor(o){const e=this.formulario.conductores[o].ci,a=confirm(`El dato del CI a buscar es ${e}, ¿Está seguro?`);a&&this.buscarConductor(o)},async buscarConductor(o){try{const e=this.formulario.conductores[o].ci;if(!e)return void alert("CI del conductor es requerido");const a="http://localhost:5000",r=await O.A.post(`${a}/segip_service`,{ced:e,com:"",nom:"",pat:"",mat:"",fnac:""},{headers:{Authorization:"Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InNpZy1ycy0wIn0.eyJ1c2VyIjoic29hdCIsInNlcnZpY2UiOiJDZXJ0aWZpY2FkbyBkZSBBY2NpZGVudGVzIGRlIFRyw6Fuc2l0byBTT0FUIiwiaWF0IjoxNzE5NDA3NzI5LCJhdWQiOiJTZXJ2aWNpbyBkZSBJZGVudGlmaWNhY2lvbiBkZSBQZXJzb25hcyIsImlzcyI6Ik1pbmlzdGVyaW8gZGUgR29iaWVybm8ifQ.YmXEQ8LpgNQxsURar6wK6bumB0VJA4ZG6JtqDWjbaNoNGj5Qjs7LHBXeedjHb4BxFj6jgIlpp71r2cjFxlqfehnsVUqNLtqyCz6FmGsiImNJl_Gw-Ll_4Z86Dkjn0X3HGpsG69scUztEW4kC8U1LtlsUnJ7jb6O2cIblcmR1NUQ","Content-Type":"application/json"}});if(r.data){const e=r.data;this.formulario.conductores[o]={...this.formulario.conductores[o],nombre:`${e.Nombres} ${e.PrimerApellido} ${e.SegundoApellido}`,ci:e.NumeroDocumento,edad:this.calculateAge(e.FechaNacimiento),domicilio:e.Domicilio,licencia:e.NumeroDocumento,categoria:"",alcoholemia:"",vehiculoCorrespondeConductor:"",licDesde:"",licHasta:""},this.conductoresEncontrados.push(this.formulario.conductores[o])}else this.$toast.error("No se encontraron datos del conductor"),alert("Conductor no encontrado")}catch(e){console.error("Error al buscar conductor:",e),e.response&&e.response.data&&e.response.data.error?alert("Error"):alert("Error al buscar conductor")}},calculateAge(o){const e=o.split("/"),a=new Date(e[2],e[1]-1,e[0]),r=new Date;let l=r.getFullYear()-a.getFullYear();const t=r.getMonth()-a.getMonth();return(t<0||0===t&&r.getDate()<a.getDate())&&l--,l},agregarConductor(){this.formulario.conductores.push({ci:"",nombre:"",edad:"",domicilio:"",licencia:"",categoria:"",alcoholemia:"",alcoholemiaHora:"",vehiculoCorrespondeConductor:"",licDesde:"",licHasta:""})},confirmarBuscarVictima(o){const e=this.formulario.victimas[o].ci,a=confirm(`El dato del CI a buscar es ${e}, ¿Está seguro?`);a&&this.buscarVictima(o)},async buscarVictima(o){try{const e=this.formulario.victimas[o].ci;if(!e)return void alert("CI de la víctima es requerido");const a="http://localhost:5000",r=await O.A.post(`${a}/segip_service`,{ced:e,com:"",nom:"",pat:"",mat:"",fnac:""},{headers:{Authorization:"Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InNpZy1ycy0wIn0.eyJ1c2VyIjoic29hdCIsInNlcnZpY2UiOiJDZXJ0aWZpY2FkbyBkZSBBY2NpZGVudGVzIGRlIFRyw6Fuc2l0byBTT0FUIiwiaWF0IjoxNzE5NDA3NzI5LCJhdWQiOiJTZXJ2aWNpbyBkZSBJZGVudGlmaWNhY2lvbiBkZSBQZXJzb25hcyIsImlzcyI6Ik1pbmlzdGVyaW8gZGUgR29iaWVybm8ifQ.YmXEQ8LpgNQxsURar6wK6bumB0VJA4ZG6JtqDWjbaNoNGj5Qjs7LHBXeedjHb4BxFj6jgIlpp71r2cjFxlqfehnsVUqNLtqyCz6FmGsiImNJl_Gw-Ll_4Z86Dkjn0X3HGpsG69scUztEW4kC8U1LtlsUnJ7jb6O2cIblcmR1NUQ","Content-Type":"application/json"}});if(r.data){const e=r.data;this.formulario.victimas[o]={...this.formulario.victimas[o],nombre:`${e.Nombres} ${e.PrimerApellido} ${e.SegundoApellido}`,ci:e.NumeroDocumento,com:"",edad:this.calculateAge(e.FechaNacimiento),domicilio:e.Domicilio,fallecidoHerido:"",tipoVictima:"",vehiculoCorrespondeVictima:"Sin Vehículo",auxiliado:""},this.victimasEncontradas.push(this.formulario.victimas[o])}else this.$toast.error("No se encontraron datos de la víctima"),alert("Víctima no encontrada")}catch(e){console.error("Error al buscar víctima:",e),e.response&&e.response.data&&e.response.data.error?alert("Error"):alert("Error al buscar víctima")}},agregarVictima(){this.formulario.victimas.push({nombre:"",ci:"",com:"",edad:"",domicilio:"",fallecidoHerido:"",tipoVictima:"",vehiculoCorrespondeVictima:"",auxiliado:""})}}};const Ke=(0,V.A)(Ye,[["render",We],["__scopeId","data-v-ec30a89a"]]);var oa=Ke;const ea=o=>((0,l.Qi)("data-v-0e7adc1f"),o=o(),(0,l.jt)(),o),aa={class:"hechos"},ra=ea((()=>(0,l.Lk)("h2",null,[(0,l.Lk)("u",null,"LISTA DE HECHOS DE TRÁNSITO")],-1))),la={class:"table-responsive"},ta={class:"search-container"},ia={class:"table table-striped"},sa=ea((()=>(0,l.Lk)("thead",{class:"thead"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"Caso N°"),(0,l.Lk)("th",null,"Día, Hora y Fecha del Hecho"),(0,l.Lk)("th",null,"Placas de Vehículos Implicados"),(0,l.Lk)("th",null,"CI de Conductores Implicados"),(0,l.Lk)("th",null,"Detalles del hecho"),(0,l.Lk)("th",null,"Denunciante"),(0,l.Lk)("th",null,"Registrado por"),(0,l.Lk)("th",null,"Ver Detalles")])],-1))),na={class:"no-bullets"},ua={class:"no-bullets"},ca={class:"detalles-col"},da={key:0},ma=["onClick"],pa=["onClick"];function ha(o,e,a,i,s,n){const u=(0,l.g2)("ModalFormulario");return(0,l.uX)(),(0,l.CE)("div",aa,[ra,(0,l.Lk)("div",la,[(0,l.Lk)("div",ta,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>s.searchQuery=o),placeholder:"Buscar por número de caso, CI de conductores o placa",class:"search-input"},null,512),[[r.Jo,s.searchQuery]])]),(0,l.Lk)("table",ia,[sa,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.formularios,(o=>((0,l.uX)(),(0,l.CE)("tr",{key:o._id},[(0,l.Lk)("td",null,(0,t.v_)(o.hechos[0].casoNumero),1),(0,l.Lk)("td",null,(0,t.v_)(n.formatearFecha(o.hechos[0].diaHoraFecha)),1),(0,l.Lk)("td",null,[(0,l.Lk)("ul",na,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.vehiculos,(o=>((0,l.uX)(),(0,l.CE)("li",{key:o._id},(0,t.v_)(o.placa),1)))),128))])]),(0,l.Lk)("td",null,[(0,l.Lk)("ul",ua,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.conductores,(o=>((0,l.uX)(),(0,l.CE)("li",{key:o._id},(0,t.v_)(o.ci),1)))),128))])]),(0,l.Lk)("td",ca,[(0,l.Lk)("p",null,(0,t.v_)(o.detalle),1)]),(0,l.Lk)("td",null,(0,t.v_)(o.hechos[0].denunciante),1),(0,l.Lk)("td",null,(0,t.v_)(o.usuario),1),(0,l.Lk)("td",null,["administrador"===n.userRole?((0,l.uX)(),(0,l.CE)("div",da,[(0,l.Lk)("button",{onClick:e=>n.abrirModal(o._id),class:"btn btn-primary"},"Ver detalles",8,ma)])):(0,l.Q3)("",!0),(0,l.Lk)("button",{onClick:e=>n.generarReporte(o._id),class:"btn btn-primary"},"Generar Reporte",8,pa)])])))),128))])])]),s.mostrarModal?((0,l.uX)(),(0,l.Wv)(u,{key:0,formulario:s.formularioActual,formularioId:s.formularioIdSeleccionado,onCerrarModal:n.cerrarModal,onGuardarCambios:n.guardarCambios},null,8,["formulario","formularioId","onCerrarModal","onGuardarCambios"])):(0,l.Q3)("",!0)])}const fa=o=>((0,l.Qi)("data-v-1004d588"),o=o(),(0,l.jt)(),o),ka={key:0,class:"modal-overlay"},ba={class:"modal-content",id:"elemento-a-pdf"},va=fa((()=>(0,l.Lk)("h1",null,"Formulario",-1))),ga=fa((()=>(0,l.Lk)("div",{class:"subt"},[(0,l.Lk)("h3",null,[(0,l.Lk)("strong",null,"1. Datos del Hecho de Tránsito")])],-1))),La={class:"form-group"},ya=fa((()=>(0,l.Lk)("label",{for:"denunciante"},"Denunciante:",-1))),Ca=["readonly"],Va={class:"form-group"},ja=fa((()=>(0,l.Lk)("label",{for:"casoNumero"},"Caso N°:",-1))),Ua=["readonly"],Ea={class:"form-group"},Ia=fa((()=>(0,l.Lk)("label",{for:"naturaleza"},"Naturaleza del Hecho:",-1))),wa=["readonly"],Da={class:"form-group"},Aa=fa((()=>(0,l.Lk)("label",{for:"departamento"},"Departamento:",-1))),Fa=["readonly"],Na=(0,l.Fv)('<option value="La Paz" data-v-1004d588>La Paz</option><option value="Cochabamba" data-v-1004d588>Cochabamba</option><option value="Santa Cruz" data-v-1004d588>Santa Cruz</option><option value="Oruro" data-v-1004d588>Oruro</option><option value="Potosi" data-v-1004d588>Potosí</option><option value="Tarija" data-v-1004d588>Tarija</option><option value="Beni" data-v-1004d588>Beni</option><option value="Pando" data-v-1004d588>Pando</option><option value="Chuquisaca" data-v-1004d588>Chuquisaca</option>',9),Ja=[Na],xa={class:"form-group"},Sa=fa((()=>(0,l.Lk)("label",{for:"estacionPolicial"},"Estación Policial:",-1))),za=["readonly"],Xa={class:"form-group"},Ha=fa((()=>(0,l.Lk)("label",{for:"lugar"},"Lugar del Hecho:",-1))),_a=["readonly"],Ba={class:"form-group"},Ra=fa((()=>(0,l.Lk)("label",{for:"diaHoraFecha"},"Día, Hora y Fecha del Hecho:",-1))),$a=["readonly"],Ga=fa((()=>(0,l.Lk)("div",{class:"subt"},[(0,l.Lk)("h3",null,[(0,l.Lk)("strong",null,"2. Datos de los Vehículos")])],-1))),Pa={key:0,class:"form-group"},Oa={class:"form-group"},Qa=["for"],Ta=["id","onUpdate:modelValue","readonly"],Za=["onClick"],qa={class:"form-group"},Ma=["for"],Wa=["id","onUpdate:modelValue","readonly"],Ya={class:"form-group"},Ka=["for"],or=["id","onUpdate:modelValue","readonly"],er={class:"form-group"},ar=["for"],rr=["id","onUpdate:modelValue","readonly"],lr={class:"form-group"},tr=["for"],ir=["id","onUpdate:modelValue","readonly"],sr={class:"form-group"},nr=["for"],ur=["id","onUpdate:modelValue","readonly"],cr={class:"form-group"},dr=["for"],mr=["id","onUpdate:modelValue","readonly"],pr=fa((()=>(0,l.Lk)("div",{class:"subt"},[(0,l.Lk)("h3",null,[(0,l.Lk)("strong",null,"3. Datos de los Conductores")])],-1))),hr={key:1,class:"form-group"},fr={class:"form-group"},kr=["for"],br=["id","onUpdate:modelValue","readonly"],vr=["onClick"],gr={class:"form-group"},Lr=["for"],yr=["id","onUpdate:modelValue","readonly"],Cr={class:"form-group"},Vr=["for"],jr=["id","onUpdate:modelValue","readonly"],Ur={class:"form-group"},Er=["for"],Ir=["id","onUpdate:modelValue","readonly"],wr={class:"form-group"},Dr=["for"],Ar=["id","onUpdate:modelValue","readonly"],Fr={class:"form-group"},Nr=["for"],Jr=["id","onUpdate:modelValue","readonly"],xr=(0,l.Fv)('<option value="A" data-v-1004d588>A</option><option value="B" data-v-1004d588>B</option><option value="C" data-v-1004d588>C</option><option value="P" data-v-1004d588>P</option><option value="M" data-v-1004d588>M</option>',5),Sr=[xr],zr={class:"form-group"},Xr=["for"],Hr=["readonly"],_r={class:"form-group"},Br=["for"],Rr=["id","readonly"],$r={class:"form-group"},Gr=["for"],Pr=["id","onUpdate:modelValue","readonly"],Or={class:"form-group"},Qr=["for"],Tr=["id","onUpdate:modelValue","readonly"],Zr={class:"form-group"},qr=["for"],Mr=["id","onUpdate:modelValue","readonly"],Wr=["value"],Yr=fa((()=>(0,l.Lk)("div",{class:"subt"},[(0,l.Lk)("h3",null,[(0,l.Lk)("strong",null,"4. Breve detalle del hecho")])],-1))),Kr={class:"form-group"},ol=fa((()=>(0,l.Lk)("label",{for:"detalle"},"Detalle del Hecho:",-1))),el=["readonly"],al=fa((()=>(0,l.Lk)("div",{class:"subt"},[(0,l.Lk)("h3",null,[(0,l.Lk)("strong",null,"5. Víctimas del hecho")])],-1))),rl={key:2,class:"form-group"},ll={class:"form-group"},tl=["for"],il=["id","onUpdate:modelValue","readonly"],sl=["onClick"],nl={class:"form-group"},ul=["for"],cl=["id","onUpdate:modelValue","readonly"],dl={class:"form-group"},ml=["for"],pl=["id","onUpdate:modelValue","readonly"],hl={class:"form-group"},fl=["for"],kl=["id","onUpdate:modelValue","readonly"],bl={class:"form-group"},vl=["for"],gl=["id","onUpdate:modelValue","readonly"],Ll=fa((()=>(0,l.Lk)("option",{value:"FALLECIDO"},"Fallecido",-1))),yl=fa((()=>(0,l.Lk)("option",{value:"HERIDO"},"Herido",-1))),Cl=[Ll,yl],Vl={class:"form-group"},jl=["for"],Ul=["id","onUpdate:modelValue","readonly"],El=fa((()=>(0,l.Lk)("option",{value:"PEATÓN"},"Peatón",-1))),Il=fa((()=>(0,l.Lk)("option",{value:"PASAJERO"},"Pasajero",-1))),wl=fa((()=>(0,l.Lk)("option",{value:"CONDUCTOR"},"Conductor",-1))),Dl=[El,Il,wl],Al={class:"form-group"},Fl=["for"],Nl=["id","onUpdate:modelValue","readonly"],Jl=fa((()=>(0,l.Lk)("option",{value:"SIN VEHÍCULO"},"Sin Vehículo",-1))),xl=["value"],Sl={class:"form-group"},zl=["for"],Xl=["id","onUpdate:modelValue","readonly"],Hl=fa((()=>(0,l.Lk)("div",{class:"subt"},[(0,l.Lk)("h3",null,[(0,l.Lk)("strong",null,"6. Fecha de Registro en el Sistema")])],-1))),_l={class:"form-group"},Bl=["for"],Rl=["id","readonly"],$l=fa((()=>(0,l.Lk)("div",{class:"subt"},[(0,l.Lk)("h3",null,[(0,l.Lk)("strong",null,"7. Usuario")])],-1))),Gl={class:"form-group"},Pl=fa((()=>(0,l.Lk)("label",{for:"usuario"},"Usuario:",-1))),Ol=["value","readonly"],Ql={class:"botones"},Tl={key:0},Zl={key:1};function ql(o,e,a,i,s,n){return a.formulario?((0,l.uX)(),(0,l.CE)("div",ka,[(0,l.Lk)("div",ba,[va,ga,(0,l.Lk)("div",La,[ya,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"denunciante","onUpdate:modelValue":e[0]||(e[0]=o=>a.formulario.hechos[0].denunciante=o),readonly:!s.editable},null,8,Ca),[[r.Jo,a.formulario.hechos[0].denunciante]])]),(0,l.Lk)("div",Va,[ja,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"casoNumero","onUpdate:modelValue":e[1]||(e[1]=o=>a.formulario.hechos[0].casoNumero=o),readonly:!s.editable},null,8,Ua),[[r.Jo,a.formulario.hechos[0].casoNumero]])]),(0,l.Lk)("div",Ea,[Ia,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"naturaleza","onUpdate:modelValue":e[2]||(e[2]=o=>a.formulario.hechos[0].naturaleza=o),readonly:!s.editable},null,8,wa),[[r.Jo,a.formulario.hechos[0].naturaleza]])]),(0,l.Lk)("div",Da,[Aa,(0,l.bo)((0,l.Lk)("select",{id:"departamento","onUpdate:modelValue":e[3]||(e[3]=o=>a.formulario.hechos[0].departamento=o),autocomplete:"off",readonly:!s.editable},Ja,8,Fa),[[r.u1,a.formulario.hechos[0].departamento]])]),(0,l.Lk)("div",xa,[Sa,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"estacionPolicial","onUpdate:modelValue":e[4]||(e[4]=o=>a.formulario.hechos[0].estacionPolicial=o),readonly:!s.editable},null,8,za),[[r.Jo,a.formulario.hechos[0].estacionPolicial]])]),(0,l.Lk)("div",Xa,[Ha,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"lugar","onUpdate:modelValue":e[5]||(e[5]=o=>a.formulario.hechos[0].lugar=o),readonly:!s.editable},null,8,_a),[[r.Jo,a.formulario.hechos[0].lugar]])]),(0,l.Lk)("div",Ba,[Ra,(0,l.bo)((0,l.Lk)("input",{type:"datetime-local",id:"diaHoraFecha","onUpdate:modelValue":e[6]||(e[6]=o=>a.formulario.hechos[0].diaHoraFecha=o),readonly:!s.editable},null,8,$a),[[r.Jo,a.formulario.hechos[0].diaHoraFecha]])]),Ga,s.editable?((0,l.uX)(),(0,l.CE)("div",Pa,[(0,l.Lk)("button",{onClick:e[7]||(e[7]=(...o)=>n.agregarVehiculo&&n.agregarVehiculo(...o))},"+ Añadir Vehículo")])):(0,l.Q3)("",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.formulario.vehiculos,((o,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e},[(0,l.Lk)("h4",null,"Vehículo "+(0,t.v_)(e+1),1),(0,l.Lk)("div",Oa,[(0,l.Lk)("label",{for:"placa"+e},"Placa:",8,Qa),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"placa"+e,"onUpdate:modelValue":e=>o.placa=e,readonly:!s.editable},null,8,Ta),[[r.Jo,o.placa]]),s.editable?((0,l.uX)(),(0,l.CE)("button",{key:0,type:"button",onClick:o=>n.confirmarBuscarVehiculo(e)},"Buscar",8,Za)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",qa,[(0,l.Lk)("label",{for:"marca"+e},"Marca:",8,Ma),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"marca"+e,"onUpdate:modelValue":e=>o.marca=e,readonly:!s.editable},null,8,Wa),[[r.Jo,o.marca]])]),(0,l.Lk)("div",Ya,[(0,l.Lk)("label",{for:"modelo"+e},"Modelo:",8,Ka),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"modelo"+e,"onUpdate:modelValue":e=>o.modelo=e,readonly:!s.editable},null,8,or),[[r.Jo,o.modelo]])]),(0,l.Lk)("div",er,[(0,l.Lk)("label",{for:"clase"+e},"Tipo Vehículo:",8,ar),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"clase"+e,"onUpdate:modelValue":e=>o.clase=e,readonly:!s.editable},null,8,rr),[[r.Jo,o.clase]])]),(0,l.Lk)("div",lr,[(0,l.Lk)("label",{for:"color"+e},"Color:",8,tr),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"color"+e,"onUpdate:modelValue":e=>o.color=e,readonly:!s.editable},null,8,ir),[[r.Jo,o.color]])]),(0,l.Lk)("div",sr,[(0,l.Lk)("label",{for:"empresa"+e},"Empresa o Institución a la que pertenece el vehículo:",8,nr),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"empresa"+e,"onUpdate:modelValue":e=>o.empresa=e,readonly:!s.editable},null,8,ur),[[r.Jo,o.empresa]])]),(0,l.Lk)("div",cr,[(0,l.Lk)("label",{for:"tipoUso"+e},"Tipo de servicio:",8,dr),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"tipoUso"+e,"onUpdate:modelValue":e=>o.tipoUso=e,readonly:!s.editable},null,8,mr),[[r.Jo,o.tipoUso]])])])))),128)),pr,s.editable?((0,l.uX)(),(0,l.CE)("div",hr,[(0,l.Lk)("button",{onClick:e[8]||(e[8]=(...o)=>n.agregarConductor&&n.agregarConductor(...o))},"+ Añadir Conductor")])):(0,l.Q3)("",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.formulario.conductores,((o,i)=>((0,l.uX)(),(0,l.CE)("div",{key:i},[(0,l.Lk)("h4",null,"Conductor "+(0,t.v_)(i+1),1),(0,l.Lk)("div",fr,[(0,l.Lk)("label",{for:"ci"+i},"CI:",8,kr),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"ci"+i,"onUpdate:modelValue":e=>o.ci=e,readonly:!s.editable},null,8,br),[[r.Jo,o.ci]]),s.editable?((0,l.uX)(),(0,l.CE)("button",{key:0,type:"button",onClick:o=>n.confirmarBuscarConductor(i)},"Buscar",8,vr)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",gr,[(0,l.Lk)("label",{for:"nombre"+i},"Nombre:",8,Lr),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"nombre"+i,"onUpdate:modelValue":e=>o.nombre=e,readonly:!s.editable},null,8,yr),[[r.Jo,o.nombre]])]),(0,l.Lk)("div",Cr,[(0,l.Lk)("label",{for:"edad"+i},"Edad:",8,Vr),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"edad"+i,"onUpdate:modelValue":e=>o.edad=e,readonly:!s.editable},null,8,jr),[[r.Jo,o.edad]])]),(0,l.Lk)("div",Ur,[(0,l.Lk)("label",{for:"domicilio"+i},"Domicilio:",8,Er),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"domicilio"+i,"onUpdate:modelValue":e=>o.domicilio=e,readonly:!s.editable},null,8,Ir),[[r.Jo,o.domicilio]])]),(0,l.Lk)("div",wr,[(0,l.Lk)("label",{for:"licencia"+i},"Licencia de Conducir N°:",8,Dr),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"licencia"+i,"onUpdate:modelValue":e=>o.licencia=e,readonly:!s.editable},null,8,Ar),[[r.Jo,o.licencia]])]),(0,l.Lk)("div",Fr,[(0,l.Lk)("label",{for:"categoria"+i},"Categoría:",8,Nr),(0,l.bo)((0,l.Lk)("select",{id:"categoria"+i,"onUpdate:modelValue":e=>o.categoria=e,readonly:!s.editable,class:"input"},Sr,8,Jr),[[r.u1,o.categoria]])]),(0,l.Lk)("div",zr,[(0,l.Lk)("label",{for:"licDesde"+i},"Vigencia desde:",8,Xr),(0,l.bo)((0,l.Lk)("input",{type:"datetime-local",id:"licDesde","onUpdate:modelValue":e[9]||(e[9]=o=>n.formattedLicDesde=o),readonly:!s.editable},null,8,Hr),[[r.Jo,n.formattedLicDesde]])]),(0,l.Lk)("div",_r,[(0,l.Lk)("label",{for:"licHasta"+i},"Vigencia hasta:",8,Br),(0,l.bo)((0,l.Lk)("input",{type:"datetime-local",id:"licHasta"+i,"onUpdate:modelValue":e[10]||(e[10]=o=>n.formattedLicHasta=o),readonly:!s.editable},null,8,Rr),[[r.Jo,n.formattedLicHasta]])]),(0,l.Lk)("div",$r,[(0,l.Lk)("label",{for:"alcoholemia"+i},"Resultado Test de Alcoholemia:",8,Gr),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"alcoholemia"+i,"onUpdate:modelValue":e=>o.alcoholemia=e,readonly:!s.editable},null,8,Pr),[[r.Jo,o.alcoholemia]])]),(0,l.Lk)("div",Or,[(0,l.Lk)("label",{for:"alcoholemiaHora"+i},"Realizado:",8,Qr),(0,l.bo)((0,l.Lk)("input",{type:"datetime-local",id:"alcoholemiaHora"+i,"onUpdate:modelValue":e=>o.alcoholemiaHora=e,readonly:!s.editable},null,8,Tr),[[r.Jo,o.alcoholemiaHora]])]),(0,l.Lk)("div",Zr,[(0,l.Lk)("label",{for:"vehiculoCorrespondeConductor"+i},"Vehículo al que Correspondía:",8,qr),(0,l.bo)((0,l.Lk)("select",{id:"vehiculoCorrespondeConductor"+i,"onUpdate:modelValue":e=>o.vehiculoCorrespondeConductor=e,readonly:!s.editable},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.formulario.vehiculos,((o,e)=>((0,l.uX)(),(0,l.CE)("option",{key:e,value:o.placa},(0,t.v_)(o.placa),9,Wr)))),128))],8,Mr),[[r.u1,o.vehiculoCorrespondeConductor]])])])))),128)),Yr,(0,l.Lk)("div",Kr,[ol,(0,l.bo)((0,l.Lk)("textarea",{id:"detalle","onUpdate:modelValue":e[11]||(e[11]=o=>a.formulario.detalle=o),maxlength:"1000",readonly:!s.editable,class:"textarea1"},null,8,el),[[r.Jo,a.formulario.detalle]])]),al,s.editable?((0,l.uX)(),(0,l.CE)("div",rl,[(0,l.Lk)("button",{onClick:e[12]||(e[12]=(...o)=>n.agregarVictima&&n.agregarVictima(...o))},"+ Añadir Víctima")])):(0,l.Q3)("",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.formulario.victimas,((o,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e},[(0,l.Lk)("h4",null,"Víctima "+(0,t.v_)(e+1),1),(0,l.Lk)("div",ll,[(0,l.Lk)("label",{for:"ci"+e},"CI:",8,tl),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"ci"+e,"onUpdate:modelValue":e=>o.ci=e,readonly:!s.editable},null,8,il),[[r.Jo,o.ci]]),s.editable?((0,l.uX)(),(0,l.CE)("button",{key:0,type:"button",onClick:o=>n.confirmarBuscarVictima(e)},"Buscar",8,sl)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",nl,[(0,l.Lk)("label",{for:"nombre"+e},"Nombre:",8,ul),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"nombre"+e,"onUpdate:modelValue":e=>o.nombre=e,readonly:!s.editable},null,8,cl),[[r.Jo,o.nombre]])]),(0,l.Lk)("div",dl,[(0,l.Lk)("label",{for:"edad"+e},"Edad:",8,ml),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"edad"+e,"onUpdate:modelValue":e=>o.edad=e,readonly:!s.editable},null,8,pl),[[r.Jo,o.edad]])]),(0,l.Lk)("div",hl,[(0,l.Lk)("label",{for:"domicilio"+e},"Domicilio:",8,fl),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"domicilio"+e,"onUpdate:modelValue":e=>o.domicilio=e,readonly:!s.editable},null,8,kl),[[r.Jo,o.domicilio]])]),(0,l.Lk)("div",bl,[(0,l.Lk)("label",{for:"fallecidoHerido"+e},"Fallecido o Herido:",8,vl),(0,l.bo)((0,l.Lk)("select",{id:"fallecidoHerido"+e,"onUpdate:modelValue":e=>o.fallecidoHerido=e,readonly:!s.editable},Cl,8,gl),[[r.u1,o.fallecidoHerido]])]),(0,l.Lk)("div",Vl,[(0,l.Lk)("label",{for:"tipoVictima"+e},"Tipo de Víctima:",8,jl),(0,l.bo)((0,l.Lk)("select",{id:"tipoVictima"+e,"onUpdate:modelValue":e=>o.tipoVictima=e,readonly:!s.editable},Dl,8,Ul),[[r.u1,o.tipoVictima]])]),(0,l.Lk)("div",Al,[(0,l.Lk)("label",{for:"vehiculoCorrespondeVictima"+e},"Vehículo al que Correspondía:",8,Fl),(0,l.bo)((0,l.Lk)("select",{id:"vehiculoCorrespondeVictima"+e,"onUpdate:modelValue":e=>o.vehiculoCorrespondeVictima=e,readonly:!s.editable},[Jl,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.formulario.vehiculos,((o,e)=>((0,l.uX)(),(0,l.CE)("option",{key:e,value:o.placa},(0,t.v_)(o.placa),9,xl)))),128))],8,Nl),[[r.u1,o.vehiculoCorrespondeVictima]])]),(0,l.Lk)("div",Sl,[(0,l.Lk)("label",{for:"auxiliado"+e},"Auxiliado:",8,zl),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"auxiliado"+e,"onUpdate:modelValue":e=>o.auxiliado=e,readonly:!s.editable},null,8,Xl),[[r.Jo,o.auxiliado]])])])))),128)),Hl,(0,l.Lk)("div",_l,[(0,l.Lk)("label",{for:o.fechaRegistro},"Fecha y Hora del Registro en el Sistema:",8,Bl),(0,l.bo)((0,l.Lk)("input",{type:"datetime-local",id:o.fechaRegistro,"onUpdate:modelValue":e[13]||(e[13]=o=>n.formattedFechaRegistro=o),readonly:!s.editable},null,8,Rl),[[r.Jo,n.formattedFechaRegistro]])]),$l,(0,l.Lk)("div",Gl,[Pl,(0,l.Lk)("input",{type:"text",id:"usuario",value:a.formulario.usuario,readonly:!s.editable},null,8,Ol)]),(0,l.Lk)("div",Ql,[s.editable?((0,l.uX)(),(0,l.CE)("div",Zl,[s.editable?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:e[15]||(e[15]=(...o)=>n.emitirGuardarCambios&&n.emitirGuardarCambios(...o))},"Guardar Cambios")):(0,l.Q3)("",!0)])):((0,l.uX)(),(0,l.CE)("div",Tl,[s.editable?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:e[14]||(e[14]=(...o)=>n.habilitarEdicion&&n.habilitarEdicion(...o))},"Modificar Datos"))])),(0,l.Lk)("div",null,[(0,l.Lk)("button",{onClick:e[16]||(e[16]=(...o)=>n.generarReporte&&n.generarReporte(...o))},"Generar Reporte")]),(0,l.Lk)("div",null,[(0,l.Lk)("button",{onClick:e[17]||(e[17]=e=>o.$emit("cerrarModal"))},"Cerrar")])])])])):(0,l.Q3)("",!0)}a(7650);var Ml={name:"ModalFormulario",props:{formulario:{type:Object,required:!0},formularioId:{type:String,required:!0}},data(){return{editable:!1,vehiculosEncontrados:[],conductoresEncontrados:[],victimasEncontradas:[]}},computed:{formattedFechaRegistro(){if(!this.formulario.fechaRegistro)return"";const o=new Date(this.formulario.fechaRegistro);return o.toISOString().slice(0,16)},formattedLicDesde(){if(!this.formulario.licDesde)return"";const o=new Date(this.formulario.licDesde);return o.toISOString().slice(0,16)},formattedLicHasta(){if(!this.formulario.licHasta)return"";const o=new Date(this.formulario.licHasta);return o.toISOString().slice(0,16)}},methods:{agregarVehiculo(){this.formulario.vehiculos.push({placa:"",marca:"",modelo:"",clase:"",color:"",empresa:"",tipoUso:""})},agregarConductor(){this.formulario.conductores.push({ci:"",nombre:"",edad:"",domicilio:"",licencia:"",categoria:"",alcoholemia:"",alcoholemiaHora:"",vehiculoCorrespondeConductor:"",licDesde:"",licHasta:""})},agregarVictima(){this.formulario.victimas.push({nombre:"",ci:"",edad:"",domicilio:"",fallecidoHerido:"",tipoVictima:"",vehiculoCorrespondeVictima:"",auxiliado:""})},cerrarModal(){this.$emit("cerrar")},habilitarEdicion(){this.editable=!0},emitirGuardarCambios(){this.$emit("guardarCambios",this.formulario,this.formulario._id)},async confirmarBuscarVehiculo(o){const e=this.formulario.vehiculos[o].placa,a=confirm(`El dato de la placa a buscar es ${e}, ¿Está seguro?`);a&&this.buscarVehiculo(o)},async buscarVehiculo(o){const e=this.formulario.vehiculos[o],a={contrasenia:"d1u4EeXYnp8Xy5h2xWbTz4o0X8EfUhihOwF7Ejd9wrJYQNXkbzCVG7PU7AWndEMDJujblbUcQnO884pdlEMA==",usuario:"MinGobDNFRServicio",token_key_MG:"P7ehC5HPARluSshmhjb4rmfULceEqO0ku5QhT5iXs3YAMlEUiEbYd6CwQKKrb2RvoT4hHz1Hw6Pm8pRMbshjw==",placa:e.placa};try{console.log("Datos de la solicitud:",a);const r=await O.A.post("https://srvweb.policiadnfr.gob.bo/api/ConsultaVehiculo/ServicioMinGob",a);if(console.log("Respuesta del servidor:",r),r.data&&r.data.datos_vehiculo){console.log("Datos del vehículo:",r.data.datos_vehiculo);const a=r.data.datos_vehiculo;delete a.fotografia;const l=this.vehiculosEncontrados.find((o=>o.placa===e.placa));l?alert("El vehículo ya ha sido agregado."):(this.formulario.vehiculos.splice(o,1,a),this.vehiculosEncontrados.push(a))}else console.log("No se encontraron datos del vehículo")}catch(r){console.error("Error al buscar el vehículo:",r)}},confirmarBuscarConductor(o){const e=this.formulario.conductores[o].ci,a=confirm(`El dato del CI a buscar es ${e}, ¿Está seguro?`);a&&this.buscarConductor(o)},async buscarConductor(o){try{const e=this.formulario.conductores[o].ci;if(!e)return void alert("CI del conductor es requerido");const a="http://localhost:5000",r=await O.A.post(`${a}/segip_service`,{ced:e,com:"",nom:"",pat:"",mat:"",fnac:""},{headers:{Authorization:"Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InNpZy1ycy0wIn0.eyJ1c2VyIjoic29hdCIsInNlcnZpY2UiOiJDZXJ0aWZpY2FkbyBkZSBBY2NpZGVudGVzIGRlIFRyw6Fuc2l0byBTT0FUIiwiaWF0IjoxNzE5NDA3NzI5LCJhdWQiOiJTZXJ2aWNpbyBkZSBJZGVudGlmaWNhY2lvbiBkZSBQZXJzb25hcyIsImlzcyI6Ik1pbmlzdGVyaW8gZGUgR29iaWVybm8ifQ.YmXEQ8LpgNQxsURar6wK6bumB0VJA4ZG6JtqDWjbaNoNGj5Qjs7LHBXeedjHb4BxFj6jgIlpp71r2cjFxlqfehnsVUqNLtqyCz6FmGsiImNJl_Gw-Ll_4Z86Dkjn0X3HGpsG69scUztEW4kC8U1LtlsUnJ7jb6O2cIblcmR1NUQ","Content-Type":"application/json"}});if(r.data){const e=r.data;this.formulario.conductores[o]={...this.formulario.conductores[o],nombre:`${e.Nombres} ${e.PrimerApellido} ${e.SegundoApellido}`,ci:e.NumeroDocumento,edad:this.calculateAge(e.FechaNacimiento),domicilio:e.Domicilio,licencia:"",categoria:"",alcoholemia:"",alcoholemiaHora:"",vehiculoCorrespondeConductor:"",licDesde:"",licHasta:""},this.conductoresEncontrados.push(this.formulario.conductores[o])}else this.$toast.error("No se encontraron datos del conductor"),alert("Conductor no encontrado")}catch(e){console.error("Error al buscar conductor:",e),e.response&&e.response.data&&e.response.data.error?alert("Error"):alert("Error al buscar conductor")}},calculateAge(o){const e=o.split("/"),a=new Date(e[2],e[1]-1,e[0]),r=new Date;let l=r.getFullYear()-a.getFullYear();const t=r.getMonth()-a.getMonth();return(t<0||0===t&&r.getDate()<a.getDate())&&l--,l},confirmarBuscarVictima(o){const e=this.formulario.victimas[o].ci,a=confirm(`El dato del CI a buscar es ${e}, ¿Está seguro?`);a&&this.buscarVictima(o)},async buscarVictima(o){try{const e=this.formulario.victimas[o].ci;if(!e)return void alert("CI de la víctima es requerido");const a="http://localhost:5000",r=await O.A.post(`${a}/segip_service`,{ced:e,com:"",nom:"",pat:"",mat:"",fnac:""},{headers:{Authorization:"Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InNpZy1ycy0wIn0.eyJ1c2VyIjoic29hdCIsInNlcnZpY2UiOiJDZXJ0aWZpY2FkbyBkZSBBY2NpZGVudGVzIGRlIFRyw6Fuc2l0byBTT0FUIiwiaWF0IjoxNzE5NDA3NzI5LCJhdWQiOiJTZXJ2aWNpbyBkZSBJZGVudGlmaWNhY2lvbiBkZSBQZXJzb25hcyIsImlzcyI6Ik1pbmlzdGVyaW8gZGUgR29iaWVybm8ifQ.YmXEQ8LpgNQxsURar6wK6bumB0VJA4ZG6JtqDWjbaNoNGj5Qjs7LHBXeedjHb4BxFj6jgIlpp71r2cjFxlqfehnsVUqNLtqyCz6FmGsiImNJl_Gw-Ll_4Z86Dkjn0X3HGpsG69scUztEW4kC8U1LtlsUnJ7jb6O2cIblcmR1NUQ","Content-Type":"application/json"}});if(r.data){const e=r.data;this.formulario.victimas[o]={...this.formulario.victimas[o],nombre:`${e.Nombres} ${e.PrimerApellido} ${e.SegundoApellido}`,ci:e.NumeroDocumento,edad:this.calculateAge(e.FechaNacimiento),domicilio:e.Domicilio,fallecidoHerido:"",tipoVictima:"",vehiculoCorrespondeVictima:"Sin Vehículo",auxiliado:""},this.victimasEncontradas.push(this.formulario.victimas[o])}else this.$toast.error("No se encontraron datos de la víctima"),alert("Víctima no encontrada")}catch(e){console.error("Error al buscar víctima:",e),e.response&&e.response.data&&e.response.data.error?alert("Error"):alert("Error al buscar víctima")}},calculateAge(o){const e=o.split("/"),a=new Date(e[2],e[1]-1,e[0]),r=new Date;let l=r.getFullYear()-a.getFullYear();const t=r.getMonth()-a.getMonth();return(t<0||0===t&&r.getDate()<a.getDate())&&l--,l},async generarReporte(){try{const o="http://localhost:5000",e=await O.A.get(`${o}/api/accidentes/reporte/${this.formularioId}`,{responseType:"blob"}),a=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=a,r.setAttribute("download",`Caso N° ${this.formulario.hechos[0].casoNumero}.pdf`),document.body.appendChild(r),r.click(),document.body.removeChild(r)}catch(o){console.error("Error generando el reporte:",o)}}}};const Wl=(0,V.A)(Ml,[["render",ql],["__scopeId","data-v-1004d588"]]);var Yl=Wl,Kl={name:"Hechos",components:{ModalFormulario:Yl},data(){return{searchQuery:"",formularios:[],mostrarModal:!1,formularioIdSeleccionado:null,formularioActual:null}},computed:{filteredFormularios(){const o=this.searchQuery.toLowerCase().trim();return o?this.formularios.filter((e=>{const a=e.hechos&&e.hechos.length>0?e.hechos[0].casoNumero.toString().toLowerCase():"",r=a.includes(o),l=!!(e.conductores&&e.conductores.length>0)&&e.conductores.some((e=>e.ci.toString().toLowerCase().includes(o))),t=!!(e.vehiculos&&e.vehiculos.length>0)&&e.vehiculos.some((e=>e.placa.toLowerCase().includes(o)));return console.log(this.formularios),r||l||t})):this.formularios}},methods:{buscar(){},formatearFecha(o){const e={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},a=new Date(o).toLocaleDateString("es-ES",e);return a},async fetchFormularios(){try{const o="http://localhost:5000",e=await O.A.get(`${o}/api/accidentes`);console.log("response",e),this.formularios=e.data.sort(((o,e)=>new Date(e.hechos[0].diaHoraFecha)-new Date(o.hechos[0].diaHoraFecha)))}catch(o){console.error("Error al obtener accidentes:",o)}},async cargarFormularios(){try{const o="http://localhost:5000",e=await O.A.get(`${o}/api/accidentes`);this.formularios=e.data.sort(((o,e)=>new Date(e.hechos[0].diaHoraFecha)-new Date(o.hechos[0].diaHoraFecha)))}catch(o){console.error("Error al obtener los formularios:",o)}},async abrirModal(o){this.formularioIdSeleccionado=o;try{const e="http://localhost:5000",a=await O.A.get(`${e}/api/accidentes/formulario/${o}`);this.formularioActual=a.data,this.mostrarModal=!0}catch(e){console.error("Error al obtener los detalles del formulario:",e)}},async guardarCambios(o,e){try{const a="http://localhost:5000",r=await O.A.put(`${a}/api/accidentes/${e}`,o);console.log("Formulario actualizado:",r.data);const l=this.formularios.findIndex((o=>o._id===e));-1!==l&&(this.formularios[l]=r.data),this.cerrarModal()}catch(a){console.error("Error actualizando formulario:",a)}},cerrarModal(){this.mostrarModal=!1,this.formularioIdSeleccionado=null,this.formularioActual=null},async generarReporte(o){try{const e="http://localhost:5000",a=await O.A.get(`${e}/api/accidentes/reporte/${o}`,{responseType:"blob"}),r=this.formularios.find((e=>e._id===o));if(!r)return void console.error("No se encontró el formulario");const l=window.URL.createObjectURL(new Blob([a.data])),t=document.createElement("a");t.href=l,t.setAttribute("download",`Caso N° ${r.hechos[0].casoNumero}.pdf`),document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error generando el reporte:",e)}}},async created(){this.cargarFormularios(),this.fetchFormularios()},mounted(){},computed:{userRole(){const o=JSON.parse(localStorage.getItem("userData"));return o?o.rol:null}}};const ot=(0,V.A)(Kl,[["render",ha],["__scopeId","data-v-0e7adc1f"]]);var et=ot;const at=(0,l.Lk)("p",null,"Cerrando sesión...",-1),rt=[at];function lt(o,e,a,r,t,i){return(0,l.uX)(),(0,l.CE)("div",null,rt)}var tt={name:"Logout",created(){localStorage.removeItem("userId"),localStorage.removeItem("token"),localStorage.removeItem("userData"),this.$router.push("/")}};const it=(0,V.A)(tt,[["render",lt]]);var st=it;const nt=o=>((0,l.Qi)("data-v-4fbbf13e"),o=o(),(0,l.jt)(),o),ut={class:"usuarios-container"},ct={class:"usuarios"},dt=nt((()=>(0,l.Lk)("h2",{class:"titulo"},"Usuarios Registrados",-1))),mt={class:"search-container"},pt={class:"table-container"},ht=nt((()=>(0,l.Lk)("th",null,"Nombre",-1))),ft=nt((()=>(0,l.Lk)("th",null,"Apellidos",-1))),kt=nt((()=>(0,l.Lk)("th",null,"Carnet",-1))),bt=nt((()=>(0,l.Lk)("th",null,"Grado",-1))),vt=nt((()=>(0,l.Lk)("th",null,"Usuario",-1))),gt={key:0},Lt={key:0},yt=["onClick"];function Ct(o,e,a,i,s,n){return(0,l.uX)(),(0,l.CE)("div",ut,[(0,l.Lk)("div",ct,[dt,(0,l.Lk)("div",mt,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>s.searchQuery=o),placeholder:"Buscar usuario",class:"search-input"},null,512),[[r.Jo,s.searchQuery]])]),(0,l.Lk)("div",pt,[(0,l.Lk)("table",null,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[ht,ft,kt,bt,vt,a.isAdmin?((0,l.uX)(),(0,l.CE)("th",gt,"Acciones")):(0,l.Q3)("",!0)])]),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.filteredUsuarios,(o=>((0,l.uX)(),(0,l.CE)("tr",{key:o._id},[(0,l.Lk)("td",null,(0,t.v_)(o.nombre),1),(0,l.Lk)("td",null,(0,t.v_)(o.apellidos),1),(0,l.Lk)("td",null,(0,t.v_)(o.carnet),1),(0,l.Lk)("td",null,(0,t.v_)(o.grado),1),(0,l.Lk)("td",null,(0,t.v_)(o.usuario),1),a.isAdmin?((0,l.uX)(),(0,l.CE)("td",Lt,[(0,l.Lk)("button",{class:"btn-editar",onClick:e=>n.editarUsuario(o._id)},"Editar",8,yt)])):(0,l.Q3)("",!0)])))),128))])])])])])}var Vt={name:"Usuarios",props:{isAdmin:Boolean},data(){return{usuarios:[],searchQuery:""}},created(){const o=localStorage.getItem("token"),e="http://localhost:5000";O.A.get(`${e}/api/usuarios`,{headers:{Authorization:`Bearer ${o}`}}).then((o=>{this.usuarios=o.data})).catch((o=>{console.log(o)}))},computed:{filteredUsuarios(){const o=this.searchQuery.toLowerCase().trim();return o?this.usuarios.filter((e=>e.nombre.toLowerCase().includes(o)||e.apellidos.toLowerCase().includes(o)||e.carnet.toLowerCase().includes(o)||e.grado.toLowerCase().includes(o)||e.usuario.toLowerCase().includes(o))):this.usuarios}},methods:{editarUsuario(o){this.$router.push(`/editar-usuario/${o}`)}}};const jt=(0,V.A)(Vt,[["render",Ct],["__scopeId","data-v-4fbbf13e"]]);var Ut=jt;const Et=o=>((0,l.Qi)("data-v-45c698a6"),o=o(),(0,l.jt)(),o),It={class:"editar-usuario-container"},wt={class:"editar-usuario"},Dt=Et((()=>(0,l.Lk)("h2",null,"Editar Usuario",-1))),At={class:"form-group"},Ft=Et((()=>(0,l.Lk)("label",{for:"nombre"},"Nombre:",-1))),Nt={class:"form-group"},Jt=Et((()=>(0,l.Lk)("label",{for:"apellidos"},"Apellidos:",-1))),xt={class:"form-group"},St=Et((()=>(0,l.Lk)("label",{for:"carnet"},"Carnet:",-1))),zt={class:"form-group"},Xt=Et((()=>(0,l.Lk)("label",{for:"grado"},"Grado:",-1))),Ht={class:"form-group"},_t=Et((()=>(0,l.Lk)("label",{for:"usuario"},"Usuario:",-1))),Bt={class:"form-group"},Rt=Et((()=>(0,l.Lk)("label",{for:"rol"},"Rol:",-1))),$t=Et((()=>(0,l.Lk)("option",{value:"usuario"},"Usuario",-1))),Gt=Et((()=>(0,l.Lk)("option",{value:"administrador"},"Administrador",-1))),Pt=[$t,Gt],Ot={class:"form-actions"},Qt=Et((()=>(0,l.Lk)("button",{type:"submit",class:"btn-guardar"},"Guardar Cambios",-1)));function Tt(o,e,a,t,i,s){return(0,l.uX)(),(0,l.CE)("div",It,[(0,l.Lk)("div",wt,[Dt,(0,l.Lk)("form",{onSubmit:e[7]||(e[7]=(0,r.D$)(((...o)=>s.actualizarUsuario&&s.actualizarUsuario(...o)),["prevent"]))},[(0,l.Lk)("div",At,[Ft,(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>i.usuario.nombre=o),required:""},null,512),[[r.Jo,i.usuario.nombre]])]),(0,l.Lk)("div",Nt,[Jt,(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>i.usuario.apellidos=o),required:""},null,512),[[r.Jo,i.usuario.apellidos]])]),(0,l.Lk)("div",xt,[St,(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>i.usuario.carnet=o),required:""},null,512),[[r.Jo,i.usuario.carnet]])]),(0,l.Lk)("div",zt,[Xt,(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=o=>i.usuario.grado=o),required:""},null,512),[[r.Jo,i.usuario.grado]])]),(0,l.Lk)("div",Ht,[_t,(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=o=>i.usuario.usuario=o),required:""},null,512),[[r.Jo,i.usuario.usuario]])]),(0,l.Lk)("div",Bt,[Rt,(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>i.usuario.rol=o),required:""},Pt,512),[[r.u1,i.usuario.rol]])]),(0,l.Lk)("div",Ot,[(0,l.Lk)("button",{type:"button",class:"btn-eliminar",onClick:e[6]||(e[6]=(...o)=>s.eliminarUsuario&&s.eliminarUsuario(...o))},"Eliminar Usuario"),Qt])],32)])])}var Zt={name:"EditarUsuario",data(){return{usuario:{nombre:"",apellidos:"",carnet:"",grado:"",usuario:"",rol:""}}},created(){const o=this.$route.params.id,e=localStorage.getItem("token"),a="http://localhost:5000";O.A.get(`${a}/usuarios/${o}`,{headers:{Authorization:`Bearer ${e}`}}).then((o=>{this.usuario=o.data})).catch((o=>{console.log(o)})),this.cargarUsuario()},methods:{cargarUsuario(){const o=this.$route.params.id,e=localStorage.getItem("token"),a="http://localhost:5000";O.A.get(`${a}/usuarios/${o}`,{headers:{Authorization:`Bearer ${e}`}}).then((o=>{this.usuario=o.data})).catch((o=>{console.log(o)}))},actualizarUsuario(){const o=this.$route.params.id,e=localStorage.getItem("token"),a="http://localhost:5000";O.A.put(`${a}/usuarios/${o}`,this.usuario,{headers:{Authorization:`Bearer ${e}`}}).then((o=>{alert("Usuario actualizado correctamente"),this.$router.push("/usuarios")})).catch((o=>{console.log(o)}))},eliminarUsuario(){const o=this.$route.params.id,e=localStorage.getItem("token"),a="http://localhost:5000";confirm("¿Estás seguro de eliminar este usuario?")&&O.A.delete(`${a}/usuarios/${o}`,{headers:{Authorization:`Bearer ${e}`}}).then((o=>{alert("Usuario eliminado correctamente"),this.$router.push("/usuarios")})).catch((o=>{console.log(o),alert("Error al eliminar ususario")}))}}};const qt=(0,V.A)(Zt,[["render",Tt],["__scopeId","data-v-45c698a6"]]);var Mt=qt;const Wt=[{path:"/",name:"Login",component:q},{path:"/register",name:"Register",component:Vo,meta:{requiresAdmin:!0}},{path:"/formulario",name:"Formulario",component:oa,meta:{requiresAuth:!0}},{path:"/hechos",name:"Hechos",component:et,meta:{requiresAuth:!0}},{path:"/logout",name:"Logout",component:st,meta:{requiresAuth:!0}},{path:"/usuarios",name:"Usuarios",component:Ut,meta:{requiresAuth:!0}},{path:"/modal-formulario/:id",name:"ModalFormulario",component:Yl,props:!0},{path:"/editar-usuario/:id",name:"EditarUsuario",component:Mt,meta:{requiresAuth:!0,requiresAdmin:!0}}],Yt=(0,E.aE)({history:(0,E.LA)("/soat/"),routes:Wt});Yt.beforeEach(((o,e,a)=>{if(o.matched.some((o=>o.meta.requiresAuth))){const e=localStorage.getItem("userId"),l=localStorage.getItem("token"),t=localStorage.getItem("userData");if(e&&l)try{const e=t?JSON.parse(t):null;o.matched.some((o=>o.meta.requiresAdmin))&&e&&"administrador"!==e.rol?(alert("No tienes permiso para acceder a esta página."),a({name:"Formulario"})):a()}catch(r){console.error("Error al analizar userData:",r),localStorage.removeItem("userData"),a({name:"Login"})}else a({name:"Login"})}else a()}));var Kt=Yt,oi=(a(7917),a(5524),a(7204));(0,oi.$N)({theme:{defaultTheme:"light",themes:{light:{colors:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}}});const ei=(0,r.Ef)(U);ei.use(Q.Ay,{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),O.A.interceptors.request.use((o=>{const e=localStorage.getItem("token");return e&&(o.headers.Authorization=`Bearer ${e}`),o}),(o=>Promise.reject(o))),Kt.beforeEach(((o,e,a)=>{const r=["/","/register","/logout"],l=!r.includes(o.path),t=localStorage.getItem("token");if(l&&!t)return a("/");a()})),ei.use(Kt),ei.mount("#app")}},e={};function a(r){var l=e[r];if(void 0!==l)return l.exports;var t=e[r]={id:r,loaded:!1,exports:{}};return o[r].call(t.exports,t,t.exports,a),t.loaded=!0,t.exports}a.m=o,function(){var o=[];a.O=function(e,r,l,t){if(!r){var i=1/0;for(c=0;c<o.length;c++){r=o[c][0],l=o[c][1],t=o[c][2];for(var s=!0,n=0;n<r.length;n++)(!1&t||i>=t)&&Object.keys(a.O).every((function(o){return a.O[o](r[n])}))?r.splice(n--,1):(s=!1,t<i&&(i=t));if(s){o.splice(c--,1);var u=l();void 0!==u&&(e=u)}}return e}t=t||0;for(var c=o.length;c>0&&o[c-1][2]>t;c--)o[c]=o[c-1];o[c]=[r,l,t]}}(),function(){a.d=function(o,e){for(var r in e)a.o(e,r)&&!a.o(o,r)&&Object.defineProperty(o,r,{enumerable:!0,get:e[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"===typeof window)return window}}()}(),function(){a.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)}}(),function(){a.r=function(o){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}}(),function(){a.nmd=function(o){return o.paths=[],o.children||(o.children=[]),o}}(),function(){var o={524:0};a.O.j=function(e){return 0===o[e]};var e=function(e,r){var l,t,i=r[0],s=r[1],n=r[2],u=0;if(i.some((function(e){return 0!==o[e]}))){for(l in s)a.o(s,l)&&(a.m[l]=s[l]);if(n)var c=n(a)}for(e&&e(r);u<i.length;u++)t=i[u],a.o(o,t)&&o[t]&&o[t][0](),o[t]=0;return a.O(c)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],(function(){return a(8631)}));r=a.O(r)})();
//# sourceMappingURL=app.4f2cab4c.js.map